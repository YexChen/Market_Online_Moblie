<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"/>
	<link rel="stylesheet" type="text/css" href="../css/cart.css"/>
	<title>购物车</title>
</head>
<body>
	<div class="cart-title">
		<div class="cart-top">
			<div class="cart-return">
				<div class="cart-tou">
					
				</div>
			</div>
			<h1>购物车</h1>
			<span class="glyphicon glyphicon-th-list cart-book" aria-hidden="true">
				
			</span>
		</div>
		<div class="cart-nav">
			<ul>
				<li><img src="../images/home.png"/><p>首页</p></li>
				<li><img src="../images/lei.png"/><p>商品分类</p></li>
				<li><img src="../images/cart.png"/><p>购物车</p></li>
				<li><img src="../images/people.png"/><p>账户中心</p></li>
			</ul>
		</div>
	</div>
	<ul class="cart-ul">
		
	</ul>
	<div class="cart-all">
		<div class="cart-select-all">
				<span class="glyphicon glyphicon-ok">
					
				</span>
		</div>
		<div class="cart-all-right">
			<p>全选</p>
			<div class="cart-all-btn">
			结算
			</div>
			<i>¥299</i>
			<em>总价:</em>
		</div>
	</div>
</body>
<script src="../js/jquery-3.2.1.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	var i=1;
	var olei = document.querySelector(".cart-book")
	var onav = document.querySelector(".cart-nav")
	olei.onclick = function () {
		if (i%2==1) {
			onav.style.display="block";
			i++;
		}else{
			onav.style.display="none";
			i++;
		}
		
	}
</script>
<script type="text/javascript">
	var token="ec9bd0a28993c66f8916810290e77fda";
	var oul = document.querySelector(".cart-ul")
	$.get("http://h6.duchengjiu.top/shop/api_cart.php?token="+token,{},function (retext) {
		console.log(retext);
		var data = retext.data;
		for (i=0;i<data.length;i++) {
			var goods_price;
			goods_price=parseInt(data[i].goods_price);
			oul.innerHTML+=`<li>
			<div class="cart-select">
				<span class="glyphicon glyphicon-ok">
					
				</span>
			</div>
			<img src="${data[i].goods_thumb}"/>
			<div class="cart-goods">
				<p>${data[i].goods_name}</p>
				<em>限时实惠</em>
				<h3>¥${goods_price}</h3>
				<span class="delet glyphicon glyphicon-trash">
					
				</span>
				<div class="p-d">
					<button class="down" >-</button>
					<button class="plus" >+</button>
					<p>1</p>
				</div>
			</div>
		</li>`
		}
		$(".cart-select").click(function () {
			if($(this).css("background-color")==="rgba(0, 0, 0, 0)") {
				$(this).css("background-color","rgb(215,6,59)")
			}else{
				$(this).css("background-color","rgba(0, 0, 0, 0)")
			}
	})
		$(".plus").click(function () {
			$(this).next()[0].innerHTML=parseInt($(this).next()[0].innerHTML)+1
		})
		$(".down").click(function () {
			if ($(this).nextAll()[1].innerHTML==1) {
				return;
			}
			$(this).nextAll()[1].innerHTML=parseInt($(this).nextAll()[1].innerHTML)-1
		})
	})
</script>
<script type="text/javascript">
	$(".cart-select-all").click(function () {
		if ($(this).css("background-color")==="rgba(0, 0, 0, 0)") {
				$(this).css("background-color","rgb(215,6,59)")
				var oall = document.querySelectorAll(".cart-select")
				for (i=0;i<oall.length;i++) {
					if(getComputedStyle(oall[i]).backgroundColor==="rgba(0, 0, 0, 0)"){
						oall[i].style.backgroundColor="rgb(215,6,59)"
					}
				}
			}else{
				$(this).css("background-color","rgba(0, 0, 0, 0)")
				var oall = document.querySelectorAll(".cart-select")
				for (i=0;i<oall.length;i++) {
					console.log(getComputedStyle(oall[i]).backgroundColor)
					if(getComputedStyle(oall[i]).backgroundColor==="rgb(215, 6, 59)"){
						oall[i].style.backgroundColor="rgba(0, 0, 0, 0)"
					}
				}
			}
	})
</script>
</html>
